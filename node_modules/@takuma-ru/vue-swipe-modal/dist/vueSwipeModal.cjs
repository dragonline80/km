(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.swipe-modal[data-v-8cbd34e1]{position:fixed;top:auto;box-sizing:border-box;width:100vw;max-width:100vw;height:100dvh;max-height:100dvh;padding:0;margin:0;overflow:hidden;border:none}.swipe-modal[data-v-8cbd34e1]::backdrop{background-color:#00000080;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.swipe-modal-content[data-v-8cbd34e1]{width:100%;height:100%}.swipe-modal-content>.panel[data-v-8cbd34e1]{max-height:calc(100dvh - 36px);overflow-y:scroll}.modal-style[data-v-8cbd34e1]{box-sizing:border-box;width:100%;color:#fff;background-color:#1d1b20;border-radius:1rem 1rem 0 0}@media (prefers-color-scheme: light){.modal-style[data-v-8cbd34e1]{color:#000;background-color:#f7f2fa;box-shadow:0 1px 4px #0000005e}}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]{position:relative;top:0;flex-shrink:0;height:36px;cursor:grab}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]:active{cursor:grabbing}.swipe-modal-drag-handle[data-v-8cbd34e1]{position:absolute;left:50%;width:32px;height:4px;margin:16px 0;content:"";background-color:#ccc;border-radius:2px;transform:translate(-50%)}')),document.head.appendChild(e)}}catch(d){console.error("vite-plugin-css-injected-by-js",d)}})();
"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue");typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=n=>typeof n<"u";function k(n){return JSON.parse(JSON.stringify(n))}function F(n,a,s,o={}){var l,i,c;const{clone:f=!1,passive:e=!1,eventName:P,deep:p=!1,defaultValue:g,shouldEmit:E}=o,y=t.getCurrentInstance(),S=s||(y==null?void 0:y.emit)||((l=y==null?void 0:y.$emit)==null?void 0:l.bind(y))||((c=(i=y==null?void 0:y.proxy)==null?void 0:i.$emit)==null?void 0:c.bind(y==null?void 0:y.proxy));let d=P;d=d||`update:${a.toString()}`;const b=v=>f?typeof f=="function"?f(v):k(v):v,h=()=>N(n[a])?b(n[a]):g,A=v=>{E?E(v)&&S(d,v):S(d,v)};if(e){const v=h(),M=t.ref(v);let u=!1;return t.watch(()=>n[a],r=>{u||(u=!0,M.value=b(r),t.nextTick(()=>u=!1))}),t.watch(M,r=>{!u&&(r!==n[a]||p)&&A(r)},{deep:p}),M}else return t.computed({get(){return h()},set(v){A(v)}})}const V=(n,a)=>{n.style.setProperty("will-change",a)},C=n=>{n.style.removeProperty("will-change")},w="cubic-bezier(0.2, 0.0, 0, 1.0)",$=({scopeName:n})=>{const a=l=>getComputedStyle(document.documentElement).getPropertyValue(`--${n}-${l}`);return{setCssVar:({name:l,value:i,fallback:c})=>{document.documentElement.style.setProperty(`--${n}-${l}`,i),c==null||c(l,a(l))},getCssVar:a,removeCssVar:l=>{document.documentElement.style.removeProperty(`--${n}-${l}`)}}},x=({scopeName:n,positionStatus:a,props:s,refs:{modalRef:o}})=>{const{getCssVar:l,setCssVar:i}=$({scopeName:n});return{cancelAnim:()=>{if(!o.value)return;const P=()=>a.value==="snap"?s.snapPoint?l("snapPointPosition"):"0%":a.value==="full"?"0%":"-100%";V(o.value,"bottom"),o.value.animate([{bottom:l("bottom")},{bottom:P()}],{duration:300,easing:w}).onfinish=()=>{i({name:"movementAmountY",value:"0"}),i({name:"bottom",value:P()}),o.value&&C(o.value)}},moveToSnapPointAnim:()=>{o.value&&s.snapPoint&&(V(o.value,"bottom"),o.value.animate([{bottom:l("bottom")},{bottom:l("snapPointPosition")}],{duration:300,easing:w}).onfinish=()=>{i({name:"movementAmountY",value:"0"}),i({name:"bottom",value:l("snapPointPosition")}),a.value="snap",o.value&&C(o.value)})},moveToFullScreenAnim:()=>{o.value&&(V(o.value,"bottom"),o.value.animate([{bottom:l("bottom")},{bottom:"0%"}],{duration:300,easing:w}).onfinish=()=>{i({name:"movementAmountY",value:"0"}),i({name:"bottom",value:"0%"}),a.value="full",o.value&&C(o.value)})}}},D=({scopeName:n,positionStatus:a,props:s,refs:{modalRef:o},vModel:l})=>{const{getCssVar:i,setCssVar:c}=$({scopeName:n}),{cancelAnim:f,moveToSnapPointAnim:e,moveToFullScreenAnim:P}=x({scopeName:n,positionStatus:a,props:s,refs:{modalRef:o}}),p=t.ref(!1),g=t.ref(0);return{isMouseDown:p,handlePointerDown:({mouseEvent:d,touchEvent:b,eventType:h})=>{h==="mouse"?g.value=d.y:g.value=b.touches[0].clientY,p.value=!0,o.value&&V(o.value,"bottom")},handlePointerMove:({mouseEvent:d,touchEvent:b,eventType:h})=>{var A,v;if(p.value&&(c(h==="mouse"?{name:"movementAmountY",value:(g.value-d.y).toString()}:{name:"movementAmountY",value:(g.value-b.touches[0].clientY).toString()}),!(Number(i("movementAmountY"))>0&&a.value==="full"||(((A=o.value)==null?void 0:A.getBoundingClientRect().top)||0)<0)&&!(!s.isFullScreen&&Number(i("movementAmountY"))>0))){if((v=o.value)==null||v.style.setProperty("user-select","none"),a.value==="snap"){c({name:"bottom",value:`calc(${i("snapPointPosition")} + ${i("movementAmountY")}px)`});return}c({name:"bottom",value:`calc(0% + ${i("movementAmountY")}px)`})}},handlePointerUp:()=>{var d;if(p.value=!1,(d=o.value)==null||d.style.removeProperty("user-select"),Math.abs(Number(i("movementAmountY")))>36){if(Number(i("movementAmountY"))<0)switch(a.value){case"full":return s.snapPoint?e():s.isPersistent?f():l.value=!1;case"snap":return s.isPersistent?f():l.value=!1;default:return}switch(a.value){case"snap":return s.isFullScreen?P():f();default:return}}return f()}}},T=n=>{if(n==="reset"){document.documentElement.style.removeProperty("overflow"),document.documentElement.style.removeProperty("overscroll-behavior-y");return}let a=window,s,o,l;document.defaultView?(a=document.defaultView,s=a.scrollX,o=a.scrollY):(l=document.documentElement,s=l.scrollLeft,o=l.scrollTop),document.documentElement.style.overflow=n,document.documentElement.style.overscrollBehaviorY=n==="auto"?"auto":"none",a.scrollTo(s,o)},O=n=>(t.pushScopeId("data-v-8cbd34e1"),n=n(),t.popScopeId(),n),_=O(()=>t.createElementVNode("div",{class:"swipe-modal-drag-handle"},null,-1)),I=t.defineComponent({__name:"SwipeModal",props:{isBackdrop:{type:Boolean,default:!0},isDragHandle:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!0},isPersistent:{type:Boolean,default:!1},isScrollLock:{type:Boolean,default:!0},modelValue:{type:Boolean,default:!1},snapPoint:{default:void 0}},emits:["update:modelValue"],setup(n,{emit:a}){const s=n,o=a,l=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2),{getCssVar:i,setCssVar:c,removeCssVar:f}=$({scopeName:l}),e=t.ref(null),P=t.ref(null),p=F(s,"modelValue",o),g=t.ref("close"),{cancelAnim:E}=x({scopeName:l,positionStatus:g,props:s,refs:{modalRef:e}}),{isMouseDown:y,handlePointerDown:S,handlePointerMove:d,handlePointerUp:b}=D({vModel:p,scopeName:l,positionStatus:g,props:s,refs:{modalRef:e,panelRef:P}}),h=u=>{if(s.isBackdrop&&u.target===u.currentTarget){if(s.isPersistent)return E();p.value=!1}},A=u=>{u.stopPropagation()},v=()=>{var r;!e.value||(s.isBackdrop?e.value.showModal():e.value.show(),(r=e.value)==null||r.style.setProperty("visibility","visible"),navigator.userAgent.toLowerCase().includes("firefox")||(V(e.value,"opacity"),e.value.animate([{opacity:0},{opacity:1}],{duration:200,pseudoElement:"::backdrop",easing:w}).onfinish=()=>{e.value&&C(e.value)}),V(e.value,"bottom"),e.value.animate([{bottom:"-100%"},{bottom:i("snapPointPosition")}],{duration:300,easing:w}).onfinish=()=>{g.value=s.snapPoint?"snap":"full",c({name:"bottom",value:i("snapPointPosition")}),s.isScrollLock&&T("hidden")},!e.value)||C(e.value)},M=()=>{if(!e.value)return;const u=navigator.userAgent.toLowerCase().includes("firefox");V(e.value,"opacity"),u||(e.value.animate([{opacity:1},{opacity:0}],{duration:300,pseudoElement:"::backdrop",easing:w}).onfinish=()=>{e.value&&C(e.value)}),V(e.value,"bottom"),e.value.animate([{bottom:i("bottom")},{bottom:"-100%"}],{duration:300,easing:w}).onfinish=()=>{var r,m,Y;c({name:"bottom",value:"-100%"}),g.value="close",y.value=!1,(r=e.value)==null||r.close(),(m=e.value)==null||m.style.setProperty("display","initial"),(Y=e.value)==null||Y.style.setProperty("visibility","hidden"),T("reset"),e.value&&C(e.value)}};return t.watch(()=>p.value,u=>{u?v():M()}),t.watch(()=>s.isScrollLock,u=>{T(u?"hidden":"auto")}),t.watch([()=>s.snapPoint,()=>P.value],([u,r])=>{let m;u?u==="auto"?m=`calc(${(r==null?void 0:r.getBoundingClientRect().height)||0}px + 36px - 100%)`:m=`calc(${u} - 100%)`:m="0px",c({name:"snapPointPosition",value:m})},{immediate:!0}),c({name:"bottom",value:"-100%"}),c({name:"movementAmountY",value:"0"}),t.onMounted(()=>{e.value&&(e.value.style.setProperty("bottom",`var(--${l}-bottom)`),e.value.addEventListener("cancel",()=>{p.value=!1}),p.value||(e.value.style.setProperty("display","initial"),e.value.style.setProperty("visibility","hidden")))}),t.onUnmounted(()=>{f("bottom"),f("movementAmountY"),f("snapPointPosition"),e.value&&e.value.removeEventListener("cancel",()=>{})}),(u,r)=>(t.openBlock(),t.createElementBlock("dialog",{ref_key:"modalRef",ref:e,class:"swipe-modal modal-style",onClick:h},[t.createElementVNode("div",{tabindex:"-1",class:"swipe-modal-content",onClick:A},[t.createElementVNode("div",{class:"swipe-modal-drag-handle-wrapper",onMousedown:r[0]||(r[0]=m=>t.unref(S)({mouseEvent:m,eventType:"mouse"})),onMousemove:r[1]||(r[1]=m=>t.unref(d)({mouseEvent:m,eventType:"mouse"})),onMouseup:r[2]||(r[2]=(...m)=>t.unref(b)&&t.unref(b)(...m)),onTouchstart:r[3]||(r[3]=m=>t.unref(S)({touchEvent:m,eventType:"touch"})),onTouchmove:r[4]||(r[4]=m=>t.unref(d)({touchEvent:m,eventType:"touch"})),onTouchend:r[5]||(r[5]=(...m)=>t.unref(b)&&t.unref(b)(...m))},[u.isDragHandle?t.renderSlot(u.$slots,"drag-handle",{key:0},()=>[_],!0):t.createCommentVNode("",!0)],32),t.createElementVNode("div",{ref_key:"panelRef",ref:P,class:"panel"},[t.renderSlot(u.$slots,"default",{},void 0,!0)],512)])],512))}}),L=(n,a)=>{const s=n.__vccOpts||n;for(const[o,l]of a)s[o]=l;return s},B=L(I,[["__scopeId","data-v-8cbd34e1"]]);exports.SwipeModal=B;exports.default=B;
