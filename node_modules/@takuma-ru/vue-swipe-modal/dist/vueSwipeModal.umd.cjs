(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.swipe-modal[data-v-8cbd34e1]{position:fixed;top:auto;box-sizing:border-box;width:100vw;max-width:100vw;height:100dvh;max-height:100dvh;padding:0;margin:0;overflow:hidden;border:none}.swipe-modal[data-v-8cbd34e1]::backdrop{background-color:#00000080;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.swipe-modal-content[data-v-8cbd34e1]{width:100%;height:100%}.swipe-modal-content>.panel[data-v-8cbd34e1]{max-height:calc(100dvh - 36px);overflow-y:scroll}.modal-style[data-v-8cbd34e1]{box-sizing:border-box;width:100%;color:#fff;background-color:#1d1b20;border-radius:1rem 1rem 0 0}@media (prefers-color-scheme: light){.modal-style[data-v-8cbd34e1]{color:#000;background-color:#f7f2fa;box-shadow:0 1px 4px #0000005e}}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]{position:relative;top:0;flex-shrink:0;height:36px;cursor:grab}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]:active{cursor:grabbing}.swipe-modal-drag-handle[data-v-8cbd34e1]{position:absolute;left:50%;width:32px;height:4px;margin:16px 0;content:"";background-color:#ccc;border-radius:2px;transform:translate(-50%)}')),document.head.appendChild(e)}}catch(d){console.error("vite-plugin-css-injected-by-js",d)}})();
(function(P,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(P=typeof globalThis<"u"?globalThis:P||self,e(P["@takuma-ru/vue-swipe-modal"]={},P.vue))})(this,function(P,e){"use strict";var Y=document.createElement("style");Y.textContent=`.swipe-modal[data-v-8cbd34e1]{position:fixed;top:auto;box-sizing:border-box;width:100vw;max-width:100vw;height:100dvh;max-height:100dvh;padding:0;margin:0;overflow:hidden;border:none}.swipe-modal[data-v-8cbd34e1]::backdrop{background-color:#00000080;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.swipe-modal-content[data-v-8cbd34e1]{width:100%;height:100%}.swipe-modal-content>.panel[data-v-8cbd34e1]{max-height:calc(100dvh - 36px);overflow-y:scroll}.modal-style[data-v-8cbd34e1]{box-sizing:border-box;width:100%;color:#fff;background-color:#1d1b20;border-radius:1rem 1rem 0 0}@media (prefers-color-scheme: light){.modal-style[data-v-8cbd34e1]{color:#000;background-color:#f7f2fa;box-shadow:0 1px 4px #0000005e}}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]{position:relative;top:0;flex-shrink:0;height:36px;cursor:grab}.swipe-modal-drag-handle-wrapper[data-v-8cbd34e1]:active{cursor:grabbing}.swipe-modal-drag-handle[data-v-8cbd34e1]{position:absolute;left:50%;width:32px;height:4px;margin:16px 0;content:"";background-color:#ccc;border-radius:2px;transform:translate(-50%)}
`,document.head.appendChild(Y),typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=o=>typeof o<"u";function F(o){return JSON.parse(JSON.stringify(o))}function D(o,l,r,n={}){var a,u,c;const{clone:f=!1,passive:t=!1,eventName:y,deep:p=!1,defaultValue:h,shouldEmit:E}=n,b=e.getCurrentInstance(),S=r||(b==null?void 0:b.emit)||((a=b==null?void 0:b.$emit)==null?void 0:a.bind(b))||((c=(u=b==null?void 0:b.proxy)==null?void 0:u.$emit)==null?void 0:c.bind(b==null?void 0:b.proxy));let v=y;v=v||`update:${l.toString()}`;const g=m=>f?typeof f=="function"?f(m):F(m):m,x=()=>N(o[l])?g(o[l]):h,A=m=>{E?E(m)&&S(v,m):S(v,m)};if(t){const m=x(),k=e.ref(m);let s=!1;return e.watch(()=>o[l],i=>{s||(s=!0,k.value=g(i),e.nextTick(()=>s=!1))}),e.watch(k,i=>{!s&&(i!==o[l]||p)&&A(i)},{deep:p}),k}else return e.computed({get(){return x()},set(m){A(m)}})}const w=(o,l)=>{o.style.setProperty("will-change",l)},C=o=>{o.style.removeProperty("will-change")},V="cubic-bezier(0.2, 0.0, 0, 1.0)",T=({scopeName:o})=>{const l=a=>getComputedStyle(document.documentElement).getPropertyValue(`--${o}-${a}`);return{setCssVar:({name:a,value:u,fallback:c})=>{document.documentElement.style.setProperty(`--${o}-${a}`,u),c==null||c(a,l(a))},getCssVar:l,removeCssVar:a=>{document.documentElement.style.removeProperty(`--${o}-${a}`)}}},$=({scopeName:o,positionStatus:l,props:r,refs:{modalRef:n}})=>{const{getCssVar:a,setCssVar:u}=T({scopeName:o});return{cancelAnim:()=>{if(!n.value)return;const y=()=>l.value==="snap"?r.snapPoint?a("snapPointPosition"):"0%":l.value==="full"?"0%":"-100%";w(n.value,"bottom"),n.value.animate([{bottom:a("bottom")},{bottom:y()}],{duration:300,easing:V}).onfinish=()=>{u({name:"movementAmountY",value:"0"}),u({name:"bottom",value:y()}),n.value&&C(n.value)}},moveToSnapPointAnim:()=>{n.value&&r.snapPoint&&(w(n.value,"bottom"),n.value.animate([{bottom:a("bottom")},{bottom:a("snapPointPosition")}],{duration:300,easing:V}).onfinish=()=>{u({name:"movementAmountY",value:"0"}),u({name:"bottom",value:a("snapPointPosition")}),l.value="snap",n.value&&C(n.value)})},moveToFullScreenAnim:()=>{n.value&&(w(n.value,"bottom"),n.value.animate([{bottom:a("bottom")},{bottom:"0%"}],{duration:300,easing:V}).onfinish=()=>{u({name:"movementAmountY",value:"0"}),u({name:"bottom",value:"0%"}),l.value="full",n.value&&C(n.value)})}}},I=({scopeName:o,positionStatus:l,props:r,refs:{modalRef:n},vModel:a})=>{const{getCssVar:u,setCssVar:c}=T({scopeName:o}),{cancelAnim:f,moveToSnapPointAnim:t,moveToFullScreenAnim:y}=$({scopeName:o,positionStatus:l,props:r,refs:{modalRef:n}}),p=e.ref(!1),h=e.ref(0);return{isMouseDown:p,handlePointerDown:({mouseEvent:v,touchEvent:g,eventType:x})=>{x==="mouse"?h.value=v.y:h.value=g.touches[0].clientY,p.value=!0,n.value&&w(n.value,"bottom")},handlePointerMove:({mouseEvent:v,touchEvent:g,eventType:x})=>{var A,m;if(p.value&&(c(x==="mouse"?{name:"movementAmountY",value:(h.value-v.y).toString()}:{name:"movementAmountY",value:(h.value-g.touches[0].clientY).toString()}),!(Number(u("movementAmountY"))>0&&l.value==="full"||(((A=n.value)==null?void 0:A.getBoundingClientRect().top)||0)<0)&&!(!r.isFullScreen&&Number(u("movementAmountY"))>0))){if((m=n.value)==null||m.style.setProperty("user-select","none"),l.value==="snap"){c({name:"bottom",value:`calc(${u("snapPointPosition")} + ${u("movementAmountY")}px)`});return}c({name:"bottom",value:`calc(0% + ${u("movementAmountY")}px)`})}},handlePointerUp:()=>{var v;if(p.value=!1,(v=n.value)==null||v.style.removeProperty("user-select"),Math.abs(Number(u("movementAmountY")))>36){if(Number(u("movementAmountY"))<0)switch(l.value){case"full":return r.snapPoint?t():r.isPersistent?f():a.value=!1;case"snap":return r.isPersistent?f():a.value=!1;default:return}switch(l.value){case"snap":return r.isFullScreen?y():f();default:return}}return f()}}},M=o=>{if(o==="reset"){document.documentElement.style.removeProperty("overflow"),document.documentElement.style.removeProperty("overscroll-behavior-y");return}let l=window,r,n,a;document.defaultView?(l=document.defaultView,r=l.scrollX,n=l.scrollY):(a=document.documentElement,r=a.scrollLeft,n=a.scrollTop),document.documentElement.style.overflow=o,document.documentElement.style.overscrollBehaviorY=o==="auto"?"auto":"none",l.scrollTo(r,n)},O=(o=>(e.pushScopeId("data-v-8cbd34e1"),o=o(),e.popScopeId(),o))(()=>e.createElementVNode("div",{class:"swipe-modal-drag-handle"},null,-1)),B=((o,l)=>{const r=o.__vccOpts||o;for(const[n,a]of l)r[n]=a;return r})(e.defineComponent({__name:"SwipeModal",props:{isBackdrop:{type:Boolean,default:!0},isDragHandle:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!0},isPersistent:{type:Boolean,default:!1},isScrollLock:{type:Boolean,default:!0},modelValue:{type:Boolean,default:!1},snapPoint:{default:void 0}},emits:["update:modelValue"],setup(o,{emit:l}){const r=o,n=l,a=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2),{getCssVar:u,setCssVar:c,removeCssVar:f}=T({scopeName:a}),t=e.ref(null),y=e.ref(null),p=D(r,"modelValue",n),h=e.ref("close"),{cancelAnim:E}=$({scopeName:a,positionStatus:h,props:r,refs:{modalRef:t}}),{isMouseDown:b,handlePointerDown:S,handlePointerMove:v,handlePointerUp:g}=I({vModel:p,scopeName:a,positionStatus:h,props:r,refs:{modalRef:t,panelRef:y}}),x=s=>{if(r.isBackdrop&&s.target===s.currentTarget){if(r.isPersistent)return E();p.value=!1}},A=s=>{s.stopPropagation()},m=()=>{var i;!t.value||(r.isBackdrop?t.value.showModal():t.value.show(),(i=t.value)==null||i.style.setProperty("visibility","visible"),navigator.userAgent.toLowerCase().includes("firefox")||(w(t.value,"opacity"),t.value.animate([{opacity:0},{opacity:1}],{duration:200,pseudoElement:"::backdrop",easing:V}).onfinish=()=>{t.value&&C(t.value)}),w(t.value,"bottom"),t.value.animate([{bottom:"-100%"},{bottom:u("snapPointPosition")}],{duration:300,easing:V}).onfinish=()=>{h.value=r.snapPoint?"snap":"full",c({name:"bottom",value:u("snapPointPosition")}),r.isScrollLock&&M("hidden")},!t.value)||C(t.value)},k=()=>{if(!t.value)return;const s=navigator.userAgent.toLowerCase().includes("firefox");w(t.value,"opacity"),s||(t.value.animate([{opacity:1},{opacity:0}],{duration:300,pseudoElement:"::backdrop",easing:V}).onfinish=()=>{t.value&&C(t.value)}),w(t.value,"bottom"),t.value.animate([{bottom:u("bottom")},{bottom:"-100%"}],{duration:300,easing:V}).onfinish=()=>{var i,d,_;c({name:"bottom",value:"-100%"}),h.value="close",b.value=!1,(i=t.value)==null||i.close(),(d=t.value)==null||d.style.setProperty("display","initial"),(_=t.value)==null||_.style.setProperty("visibility","hidden"),M("reset"),t.value&&C(t.value)}};return e.watch(()=>p.value,s=>{s?m():k()}),e.watch(()=>r.isScrollLock,s=>{M(s?"hidden":"auto")}),e.watch([()=>r.snapPoint,()=>y.value],([s,i])=>{let d;s?s==="auto"?d=`calc(${(i==null?void 0:i.getBoundingClientRect().height)||0}px + 36px - 100%)`:d=`calc(${s} - 100%)`:d="0px",c({name:"snapPointPosition",value:d})},{immediate:!0}),c({name:"bottom",value:"-100%"}),c({name:"movementAmountY",value:"0"}),e.onMounted(()=>{t.value&&(t.value.style.setProperty("bottom",`var(--${a}-bottom)`),t.value.addEventListener("cancel",()=>{p.value=!1}),p.value||(t.value.style.setProperty("display","initial"),t.value.style.setProperty("visibility","hidden")))}),e.onUnmounted(()=>{f("bottom"),f("movementAmountY"),f("snapPointPosition"),t.value&&t.value.removeEventListener("cancel",()=>{})}),(s,i)=>(e.openBlock(),e.createElementBlock("dialog",{ref_key:"modalRef",ref:t,class:"swipe-modal modal-style",onClick:x},[e.createElementVNode("div",{tabindex:"-1",class:"swipe-modal-content",onClick:A},[e.createElementVNode("div",{class:"swipe-modal-drag-handle-wrapper",onMousedown:i[0]||(i[0]=d=>e.unref(S)({mouseEvent:d,eventType:"mouse"})),onMousemove:i[1]||(i[1]=d=>e.unref(v)({mouseEvent:d,eventType:"mouse"})),onMouseup:i[2]||(i[2]=(...d)=>e.unref(g)&&e.unref(g)(...d)),onTouchstart:i[3]||(i[3]=d=>e.unref(S)({touchEvent:d,eventType:"touch"})),onTouchmove:i[4]||(i[4]=d=>e.unref(v)({touchEvent:d,eventType:"touch"})),onTouchend:i[5]||(i[5]=(...d)=>e.unref(g)&&e.unref(g)(...d))},[s.isDragHandle?e.renderSlot(s.$slots,"drag-handle",{key:0},()=>[O],!0):e.createCommentVNode("",!0)],32),e.createElementVNode("div",{ref_key:"panelRef",ref:y,class:"panel"},[e.renderSlot(s.$slots,"default",{},void 0,!0)],512)])],512))}}),[["__scopeId","data-v-8cbd34e1"]]);P.SwipeModal=B,P.default=B,Object.defineProperties(P,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
